<!DOCTYPE html>
<html>
<head>
    <title>Interactive Lotka-Volterra Equations</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/vs2015.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Interactive Lotka-Volterra Predator-Prey Model</h1>
    
    <p>The Lotka-Volterra equations describe the dynamics of biological systems in which two species interact, one as a predator and the other as prey. The model was developed independently by Alfred J. Lotka and Vito Volterra in the 1920s.</p>
    
    <div class="tabs">
        <div class="tab active" onclick="switchTab('equations')">Equations</div>
        <div class="tab" onclick="switchTab('code')">Python Implementation</div>
        <div class="tab" onclick="switchTab('plots')">Time Plots</div>
    </div>
    
    <div id="equations" class="tab-content active">
        <div class="equation-container">
            <h2>The Equations</h2>
            <p>The model consists of two first-order, non-linear differential equations:</p>
            
            <div class="equation">
                <p style="font-size: 20px; margin: 20px 0;">
                    <span class="term rate-term">
                        \(\frac{dx}{dt}\)
                        <span class="tooltip">
                            <strong>Rate of change of the prey population over time</strong><br>
                            This represents how the prey population changes at each moment in time.
                            <div class="code-snippet">
                                <pre><code class="python"># In Python differential equations, dx/dt is implemented as:
# <a href="#33" onclick="return goToCodeLine('33')">See line 33 in the Python Implementation</a>
# Similar to the lotka_volterra function (<a href="#6" onclick="return goToCodeLine('6')">line 6</a>-<a href="#35" onclick="return goToCodeLine('35')">35</a>)
def dxdt(x, y, alpha, beta):
    return alpha * x - beta * x * y</code></pre>
                            </div>
                        </span>
                    </span>
                    = 
                    <span class="equation-term growth-term">
                        <span class="term-box">
                            <span class="term">
                                \(\alpha\)
                                <span class="tooltip">
                                    <strong>Prey growth rate</strong><br>
                                    The natural reproduction rate of prey in the absence of predators.
                                    <div class="code-snippet">
                                        <pre><code class="python"># In the code, alpha is a constant parameter:
# <a href="#38" onclick="return goToCodeLine('38')">See line 38 in the Python Implementation</a>
alpha = 1.1  # Prey growth rate</code></pre>
                                    </div>
                                </span>
                            </span>
                            <span class="term">
                                \(x\)
                                <span class="tooltip">
                                    <strong>Prey population size</strong><br>
                                    The number of prey individuals in the ecosystem.
                                    <div class="code-snippet">
                                        <pre><code class="python"># In the code, x is tracked as an array over time:
# <a href="#62" onclick="return goToCodeLine('62')">See line 62 in the Python Implementation</a>
x = solution.y[0]  # Prey population over time</code></pre>
                                    </div>
                                </span>
                            </span>
                        </span>
                        <span class="tooltip term-meaning">
                            <strong>Prey Birth Term</strong><br>
                            This term represents the natural growth of the prey population through reproduction.
                            <br>The prey population grows at a rate proportional to its current size.
                            <div class="code-snippet">
                                <pre><code class="python"># In code, this term is implemented as:
# <a href="#33" onclick="return goToCodeLine('33')">See line 33 in the Python Implementation</a>
alpha * x  # First part of dxdt calculation</code></pre>
                            </div>
                        </span>
                    </span>
                    - 
                    <span class="equation-term predation-term">
                        <span class="term-box">
                            <span class="term">
                                \(\beta\)
                                <span class="tooltip">
                                    <strong>Predation rate</strong><br>
                                    The rate at which predators encounter and consume prey.
                                    <div class="code-snippet">
                                        <pre><code class="python"># In the code, beta is a constant parameter:
# <a href="#39" onclick="return goToCodeLine('39')">See line 39 in the Python Implementation</a>
beta = 0.4   # Predation rate</code></pre>
                                    </div>
                                </span>
                            </span>
                            <span class="term">
                                \(x\)
                                <span class="tooltip">
                                    <strong>Prey population size</strong><br>
                                    The number of prey individuals in the ecosystem.
                                    <div class="code-snippet">
                                        <pre><code class="python"># In the code, x is tracked as an array over time:
# <a href="#62" onclick="return goToCodeLine('62')">See line 62 in the Python Implementation</a>
x = solution.y[0]  # Prey population over time</code></pre>
                                    </div>
                                </span>
                            </span>
                            <span class="term">
                                \(y\)
                                <span class="tooltip">
                                    <strong>Predator population size</strong><br>
                                    The number of predator individuals in the ecosystem.
                                    <div class="code-snippet">
                                        <pre><code class="python"># In the code, y is tracked as an array over time:
# See lines 310, 312 in the Python Implementation:
y = solution.y[1]  # Predator population over time</code></pre>
                                    </div>
                                </span>
                            </span>
                        </span>
                        <span class="tooltip term-meaning">
                            <strong>Predation Term</strong><br>
                            This term represents prey deaths due to predation.
                            <br>The rate of predation depends on both the prey and predator populations - more encounters occur when both populations are larger.
                            <div class="code-snippet">
                                <pre><code class="python"># In code, this term is implemented as:
# <a href="#33" onclick="return goToCodeLine('33')">See line 33 in the Python Implementation</a>
beta * x * y  # Negative term in prey equation</code></pre>
                            </div>
                        </span>
                    </span>
                </p>
            </div>
            
            <div class="equation">
                <p style="font-size: 20px; margin: 20px 0;">
                    <span class="term rate-term">
                        \(\frac{dy}{dt}\)
                        <span class="tooltip">
                            <strong>Rate of change of the predator population over time</strong><br>
                            This represents how the predator population changes at each moment in time.
                            <div class="code-snippet">
                                <pre><code class="python"># In Python differential equations, dy/dt is implemented as:
# <a href="#34" onclick="return goToCodeLine('34')">See line 34 in the Python Implementation</a>
# Similar to the lotka_volterra function (<a href="#6" onclick="return goToCodeLine('6')">line 6</a>-<a href="#35" onclick="return goToCodeLine('35')">35</a>)
def dydt(x, y, gamma, delta):
    return -gamma * y + delta * x * y  # Similar to line 283</code></pre>
                            </div>
                        </span>
                    </span>
                    = 
                    <span class="equation-term death-term">
                        <span class="term-box">
                            <span class="term">
                                \(-\gamma\)
                                <span class="tooltip">
                                    <strong>Predator death rate</strong><br>
                                    The natural mortality rate of predators in the absence of prey.
                                    <div class="code-snippet">
                                        <pre><code class="python"># In the code, gamma is a constant parameter:
# <a href="#40" onclick="return goToCodeLine('40')">See line 40 in the Python Implementation</a>
gamma = 0.4  # Predator death rate</code></pre>
                                    </div>
                                </span>
                            </span>
                            <span class="term">
                                \(y\)
                                <span class="tooltip">
                                    <strong>Predator population size</strong><br>
                                    The number of predator individuals in the ecosystem.
                                    <div class="code-snippet">
                                        <pre><code class="python"># In the code, y is tracked as an array over time:
# See lines 310, 312 in the Python Implementation:
y = solution.y[1]  # Predator population over time</code></pre>
                                    </div>
                                </span>
                            </span>
                        </span>
                        <span class="tooltip term-meaning">
                            <strong>Predator Death Term</strong><br>
                            This term represents the natural mortality of predators.
                            <br>Predator deaths occur at a rate proportional to the current predator population.
                            <div class="code-snippet">
                                <pre><code class="python"># In code, this term is implemented as:
# <a href="#34" onclick="return goToCodeLine('34')">See line 34 in the Python Implementation</a>
-gamma * y  # First term in predator equation</code></pre>
                            </div>
                        </span>
                    </span>
                    + 
                    <span class="equation-term reproduction-term">
                        <span class="term-box">
                            <span class="term">
                                \(\delta\)
                                <span class="tooltip">
                                    <strong>Predator efficiency</strong><br>
                                    The efficiency with which predators convert consumed prey into new predators.
                                    <div class="code-snippet">
                                        <pre><code class="python"># In the code, delta is a constant parameter:
# <a href="#41" onclick="return goToCodeLine('41')">See line 41 in the Python Implementation</a>
delta = 0.1  # Predator efficiency</code></pre>
                                    </div>
                                </span>
                            </span>
                            <span class="term">
                                \(x\)
                                <span class="tooltip">
                                    <strong>Prey population size</strong><br>
                                    The number of prey individuals in the ecosystem.
                                    <div class="code-snippet">
                                        <pre><code class="python"># In the code, x is tracked as an array over time:
# <a href="#62" onclick="return goToCodeLine('62')">See line 62 in the Python Implementation</a>
x = solution.y[0]  # Prey population over time</code></pre>
                                    </div>
                                </span>
                            </span>
                            <span class="term">
                                \(y\)
                                <span class="tooltip">
                                    <strong>Predator population size</strong><br>
                                    The number of predator individuals in the ecosystem.
                                    <div class="code-snippet">
                                        <pre><code class="python"># In the code, y is tracked as an array over time:
# See lines 310, 312 in the Python Implementation:
y = solution.y[1]  # Predator population over time</code></pre>
                                    </div>
                                </span>
                            </span>
                        </span>
                        <span class="tooltip term-meaning">
                            <strong>Predator Reproduction Term</strong><br>
                            This term represents the growth of the predator population from consuming prey.
                            <br>Predator births are proportional to successful predation events (which depend on both populations).
                            <div class="code-snippet">
                                <pre><code class="python"># In code, this term is implemented as:
# <a href="#34" onclick="return goToCodeLine('34')">See line 34 in the Python Implementation</a>
delta * x * y  # Positive term in predator equation</code></pre>
                            </div>
                        </span>
                    </span>
                </p>
            </div>
        </div>
        
        <h2>Explanation of the Model</h2>
        <p>The Lotka-Volterra model makes several important assumptions:</p>
        <ul>
            <li>The prey population would grow exponentially without predation</li>
            <li>The predator population would decline exponentially without prey to consume</li>
            <li>Predators consume prey according to a functional response that is proportional to both populations</li>
            <li>The ecosystem has no environmental complexity (e.g., no seasons, no places to hide)</li>
        </ul>
        
        <p>Despite its simplicity, the model captures the fundamental oscillatory dynamics often observed in predator-prey systems in nature.</p>
    </div>
    
    <div id="code" class="tab-content">
        <h2>Python Implementation</h2>
        <p>Below is a complete Python implementation of the Lotka-Volterra model using numerical integration:</p>
        
        <pre class="line-numbers"><code class="python">import numpy as np
import matplotlib.pyplot as plt
from scipy.integrate import solve_ivp

# Define the Lotka-Volterra equations
def lotka_volterra(t, z, alpha, beta, gamma, delta):
    """
    Implementation of the Lotka-Volterra predator-prey model.
    
    Parameters:
    -----------
    t : float
        Time (independent variable)
    z : array
        Current state [x, y] where:
        x : float - Prey population
        y : float - Predator population
    alpha : float
        Prey growth rate (reproduction rate of prey when no predators)
    beta : float
        Predation rate (rate at which predators consume prey)
    gamma : float
        Predator death rate (mortality rate of predators without prey)
    delta : float
        Predator efficiency (conversion rate of consumed prey into predator births)
    
    Returns:
    --------
    dzdt : array
        Rate of change [dx/dt, dy/dt]
    """
    x, y = z
    dxdt = alpha * x - beta * x * y  # Rate of change of prey population
    dydt = -gamma * y + delta * x * y  # Rate of change of predator population
    return [dxdt, dydt]

# Model parameters
alpha = 1.1  # Prey growth rate
beta = 0.4   # Predation rate
gamma = 0.4  # Predator death rate
delta = 0.1  # Predator efficiency

# Initial conditions
x0 = 10.0  # Initial prey population
y0 = 5.0   # Initial predator population

# Time parameters
t_span = (0, 100)  # Time range for simulation
t_eval = np.linspace(t_span[0], t_span[1], 1000)  # Points to evaluate solution at

# Solve the differential equations
solution = solve_ivp(
    fun=lambda t, z: lotka_volterra(t, z, alpha, beta, gamma, delta),
    t_span=t_span,
    y0=[x0, y0],
    t_eval=t_eval,
    method='RK45'  # Runge-Kutta method
)

# Extract results
t = solution.t
x = solution.y[0]  # Prey population over time
y = solution.y[1]  # Predator population over time

# Plot the results
plt.figure(figsize=(12, 8))

# Population over time
plt.subplot(2, 1, 1)
plt.plot(t, x, 'b-', label='Prey (x)')
plt.plot(t, y, 'r-', label='Predator (y)')
plt.grid(True)
plt.xlabel('Time')
plt.ylabel('Population')
plt.title('Lotka-Volterra Model: Population Dynamics')
plt.legend()

# Phase portrait
plt.subplot(2, 1, 2)
plt.plot(x, y, 'g-')
plt.grid(True)
plt.xlabel('Prey Population (x)')
plt.ylabel('Predator Population (y)')
plt.title('Phase Portrait')

plt.tight_layout()
plt.show()

# Print some statistics
print(f"Maximum prey population: {np.max(x):.2f}")
print(f"Maximum predator population: {np.max(y):.2f}")
print(f"Average prey population: {np.mean(x):.2f}")
print(f"Average predator population: {np.mean(y):.2f}")
</code><span class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre>
    </div>
    
    <div id="plots" class="tab-content">
        <h2>Population Dynamics Over Time</h2>
        <p>The Lotka-Volterra model produces characteristic oscillations in the populations of predator and prey species:</p>
        
        <div class="plot-container">
            <div class="plot-wrapper">
                <h3>Population vs. Time</h3>
                <p>This plot shows how the prey (blue) and predator (red) populations change over time.</p>
                <div class="plot" id="time-plot">
                    <img src="population_time_plot.png" alt="Population vs Time Plot" class="plot-image">
                    <div class="plot-description">
                        <p>Key observations:</p>
                        <ul>
                            <li>The prey population (blue) increases when there are few predators</li>
                            <li>As prey becomes abundant, the predator population (red) increases</li>
                            <li>The growing predator population reduces the prey population</li>
                            <li>With less prey available, the predator population declines</li>
                            <li>This cycle repeats, creating the characteristic oscillations</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="plot-wrapper">
                <h3>Phase Portrait</h3>
                <p>This plot shows the relationship between predator and prey populations, revealing the cyclic nature of the system.</p>
                <div class="plot" id="phase-plot">
                    <img src="phase_portrait.png" alt="Phase Portrait" class="plot-image">
                    <div class="plot-description">
                        <p>Key observations:</p>
                        <ul>
                            <li>Each point represents the population sizes at a moment in time</li>
                            <li>The closed loops indicate the system returns to similar states periodically</li>
                            <li>The system orbits around an equilibrium point where both populations are stable</li>
                            <li>The exact shape depends on the parameters (α, β, γ, δ)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="plot-controls">
            <h3>Interactive Parameters</h3>
            <p>Coming soon: Interactive sliders to adjust model parameters and see how they affect the dynamics.</p>
        </div>
    </div>
    
    <script src="script.js"></script>
</body>
</html>